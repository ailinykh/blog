"use strict";(self.webpackChunkailinykh_com=self.webpackChunkailinykh_com||[]).push([[610],{2416:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>n,toc:()=>c});var n=i(7550),s=i(4848),a=i(8453);const l={slug:"ffmpeg-cheatsheet",title:"FFMPEG cheatsheet",authors:["anton"],tags:["ffmpeg","cheatsheet"]},o=void 0,r={authorsImageUrls:[void 0]},c=[{value:"Show detailed information about video file",id:"show-detailed-information-about-video-file",level:3},{value:"Resize to desired width/height",id:"resize-to-desired-widthheight",level:3},{value:"Split video by size",id:"split-video-by-size",level:3},{value:"Use -map_metadata to keep <code>id3</code> tags",id:"use--map_metadata-to-keep-id3-tags",level:3},{value:"Convert to 1080p",id:"convert-to-1080p",level:3},{value:"Convert video to .gif",id:"convert-video-to-gif",level:3},{value:"Rotate video",id:"rotate-video",level:3}];function d(e){const t={admonition:"admonition",code:"code",em:"em",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"Here you can find some usefull tips of using ffmpeg library"}),"\n",(0,s.jsx)(t.admonition,{title:"a sample video file to play with",type:"tip",children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"curl -o input.mp4 https://www.w3schools.com/html/mov_bbb.mp4\n"})})}),"\n",(0,s.jsx)(t.h3,{id:"show-detailed-information-about-video-file",children:"Show detailed information about video file"}),"\n",(0,s.jsxs)(t.p,{children:["the ",(0,s.jsx)(t.code,{children:"ffprobe"})," works with ",(0,s.jsx)(t.em,{children:"images"})," as well"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"ffprobe -v error -of json -show_streams -show_format input.mp4\n"})}),"\n",(0,s.jsx)(t.h3,{id:"resize-to-desired-widthheight",children:"Resize to desired width/height"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["explicit size: ",(0,s.jsx)(t.code,{children:"scale=640:480"})]}),"\n",(0,s.jsxs)(t.li,{children:["resize only by width: ",(0,s.jsx)(t.code,{children:"scale=640:-1"})]}),"\n",(0,s.jsxs)(t.li,{children:["resize only by height: ",(0,s.jsx)(t.code,{children:"scale=-1:480"})]}),"\n",(0,s.jsxs)(t.li,{children:["to make a thumbnail just specify ",(0,s.jsx)(t.code,{children:"output.jpg"})," as output file"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"ffmpeg -v error -y -i input.mp4 -ss 00:00:01.000 -vframes 1 \\\n    -filter:v scale=320:-1 output.mp4\n"})}),"\n",(0,s.jsx)(t.h3,{id:"split-video-by-size",children:"Split video by size"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"split video by 50MB"}),"\n",(0,s.jsxs)(t.li,{children:["specify offset as ",(0,s.jsx)(t.code,{children:"-ss 00:10:00"})]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"ffmpeg -v error -y -i input.mp4 -fs 50000000 output.mp4\n"})}),"\n",(0,s.jsxs)(t.h3,{id:"use--map_metadata-to-keep-id3-tags",children:["Use -map_metadata to keep ",(0,s.jsx)(t.code,{children:"id3"})," tags"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"ffmpeg -i input.mp4 -map 1 -c copy output.mp4\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"copy global metadata"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"ffmpeg -i input.mp4 -map_metadata 0 -c copy output.mp4\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"copy video stream metadata only"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"ffmpeg -i input.mp4 -map_metadata:s:v 0:s:v -c copy output.mp4\n"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"copy audio stream metadata only"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"ffmpeg -i input.mp4 -map_metadata:s:a 0:s:a -c copy output.mp4\n"})}),"\n",(0,s.jsx)(t.h3,{id:"convert-to-1080p",children:"Convert to 1080p"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"ffmpeg -v error -stats -i input.mp4 -map_metadata 0:g -s hd1080 \\\n    -c:v libx264 -crf 23 -c:a aac -strict -2 output.mp4\n"})}),"\n",(0,s.jsx)(t.h3,{id:"convert-video-to-gif",children:"Convert video to .gif"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'ffmpeg -v error -stats -i input.mp4 -y \\\n    -vf fps=10,scale=640:-1:flags=lanczos,palettegen palette.png\n\nffmpeg -v error -stats -i input.mp4 -i palette.png -filter_complex \\\n    "fps=10,scale=640:-1:flags=lanczos[x];[x][1:v]paletteuse" output.gif\n\nrm palette.png\n'})}),"\n",(0,s.jsx)(t.h3,{id:"rotate-video",children:"Rotate video"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"0 = 90CounterCLockwise and Vertical Flip (default)"}),"\n",(0,s.jsx)(t.li,{children:"1 = 90Clockwise"}),"\n",(0,s.jsx)(t.li,{children:"2 = 90CounterClockwise"}),"\n",(0,s.jsx)(t.li,{children:"3 = 90Clockwise and Vertical Flip"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:'ffmpeg -i input.mp4 -vf "transpose=1" output.mp4\n'})})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},7550:e=>{e.exports=JSON.parse('{"permalink":"/ffmpeg-cheatsheet","editUrl":"https://github.com/ailinykh/blog/edit/master/blog/2023-05-27-ffmpeg-cheatsheet.md","source":"@site/blog/2023-05-27-ffmpeg-cheatsheet.md","title":"FFMPEG cheatsheet","description":"Here you can find some usefull tips of using ffmpeg library","date":"2023-05-27T00:00:00.000Z","tags":[{"inline":true,"label":"ffmpeg","permalink":"/tags/ffmpeg"},{"inline":true,"label":"cheatsheet","permalink":"/tags/cheatsheet"}],"readingTime":1.39,"hasTruncateMarker":true,"authors":[{"name":"Anton Ilinykh","title":"Software Engineer","imageURL":"https://avatars.githubusercontent.com/u/939390?s=400&v=4","key":"anton","page":null}],"frontMatter":{"slug":"ffmpeg-cheatsheet","title":"FFMPEG cheatsheet","authors":["anton"],"tags":["ffmpeg","cheatsheet"]},"unlisted":false,"prevItem":{"title":"Mikrotik vs Roskomnadzor","permalink":"/mikrotik-ipsec-l2tp-bgp-routing"},"nextItem":{"title":"Homebrew package version downgrade","permalink":"/homebrew-formula-downgrade"}}')},8453:(e,t,i)=>{i.d(t,{R:()=>l,x:()=>o});var n=i(6540);const s={},a=n.createContext(s);function l(e){const t=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),n.createElement(a.Provider,{value:t},e.children)}}}]);