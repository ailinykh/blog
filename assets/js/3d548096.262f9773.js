"use strict";(self.webpackChunkailinykh_com=self.webpackChunkailinykh_com||[]).push([[7304],{1331:e=>{e.exports=JSON.parse('{"permalink":"/homebrew-formula-downgrade","editUrl":"https://github.com/ailinykh/blog/edit/master/blog/2021-10-23-homebrew-formula-downgrade.md","source":"@site/blog/2021-10-23-homebrew-formula-downgrade.md","title":"Homebrew package version downgrade","description":"Nowadays rollback to any particular version of the Homebrew package might be tricky since the commands brew versions  and brew switch   are deprecated and no more available.","date":"2021-10-23T00:00:00.000Z","tags":[{"inline":true,"label":"homebrew","permalink":"/tags/homebrew"},{"inline":true,"label":"package","permalink":"/tags/package"},{"inline":true,"label":"formula","permalink":"/tags/formula"},{"inline":true,"label":"rollback","permalink":"/tags/rollback"},{"inline":true,"label":"guide","permalink":"/tags/guide"}],"readingTime":2.9,"hasTruncateMarker":true,"authors":[{"name":"Anton Ilinykh","title":"Software Engineer","imageURL":"https://avatars.githubusercontent.com/u/939390?s=400&v=4","key":"anton","page":null}],"frontMatter":{"slug":"homebrew-formula-downgrade","title":"Homebrew package version downgrade","authors":["anton"],"tags":["homebrew","package","formula","rollback","guide"]},"unlisted":false,"prevItem":{"title":"FFMPEG cheatsheet","permalink":"/ffmpeg-cheatsheet"},"nextItem":{"title":"Testing netwok requests with URLProtocol stubs","permalink":"/network-testing-with-url-protocol-stubbing"}}')},1474:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var o=t(1331),r=t(4848),a=t(8453);const s={slug:"homebrew-formula-downgrade",title:"Homebrew package version downgrade",authors:["anton"],tags:["homebrew","package","formula","rollback","guide"]},i=void 0,l={authorsImageUrls:[void 0]},c=[{value:"Install using remote tap",id:"install-using-remote-tap",level:2},{value:"Install using local tap and brew extract",id:"install-using-local-tap-and-brew-extract",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Nowadays rollback to any particular version of the Homebrew package might be tricky since the commands ",(0,r.jsx)(n.code,{children:"brew versions <package>"})," and ",(0,r.jsx)(n.code,{children:"brew switch <package> <version>"})," are deprecated and no more available."]}),"\n",(0,r.jsx)(n.p,{children:"First, you should check if any other versions are available for your package:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'admin@macos ~ % brew search python\n==> Formulae\napp-engine-python          python-launcher            python@3.8\nboost-python               python-markdown            python@3.9 \u2714\nboost-python3              python-tabulate            reorder-python-imports\nbpython                    python-tk@3.10             wxpython\ngst-python                 python-tk@3.9              pythran\nipython                    python-yq                  jython\nmicropython                python@3.10                cython\nptpython                   python@3.7\n==> Casks\nawips-python                             mysql-connector-python\n\nIf you meant "python" specifically:\nIt was migrated from homebrew/cask to homebrew/core.\n'})}),"\n",(0,r.jsx)(n.p,{children:"if so, the necessary version could be installed right from the repo:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"admin@macos ~ % brew install python@3.10\nadmin@macos ~ % brew link python@3.10\nadmin@macos ~ % python3 --version                                                               \nPython 3.10.0\n\nadmin@macos ~ % \n"})}),"\n",(0,r.jsx)(n.p,{children:"if not, there are two more ways to achieve that."}),"\n",(0,r.jsx)(n.h2,{id:"install-using-remote-tap",children:"Install using remote tap"}),"\n",(0,r.jsx)(n.p,{children:"You should find the correct Formula file at github.com"}),"\n",(0,r.jsxs)(n.p,{children:["Let's say you are trying to downgrade the ",(0,r.jsx)(n.code,{children:"git-lfs"})," package. In this case, you should follow these steps:"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Go to ",(0,r.jsx)(n.a,{href:"https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/git-lfs.rb",children:"https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/git-lfs.rb"})]}),"\n",(0,r.jsxs)(n.li,{children:["In the top right corner find the ",(0,r.jsx)(n.strong,{children:"History"})," button"]}),"\n",(0,r.jsx)(n.li,{children:"Find commit with the version you need"}),"\n",(0,r.jsxs)(n.li,{children:["Choose ",(0,r.jsx)(n.strong,{children:"View file"})," from the menu"]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Raw"})," button"]}),"\n",(0,r.jsxs)(n.li,{children:["That is it! You've got the Url: ",(0,r.jsx)(n.a,{href:"https://raw.githubusercontent.com/Homebrew/homebrew-core/43842898fd3ff43273466052722f5ba2789196cb/Formula/git-lfs.rb",children:"https://raw.githubusercontent.com/Homebrew/homebrew-core/43842898fd3ff43273466052722f5ba2789196cb/Formula/git-lfs.rb"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["or just by using ",(0,r.jsx)(n.code,{children:"git log git-lfs"})," command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",metastring:"{19}",children:"admin@macos ~ % brew log git-lfs\ncommit be2109eae9e1043ddb78e593a8a05d568917ca95\nAuthor: BrewTestBot <1589480+BrewTestBot@users.noreply.github.com>\nDate:   Wed Sep 29 02:14:15 2021 +0000\n\n    git-lfs: update 3.0.1 bottle.\n\ncommit 1c4607366f2c5d85c2efa803556f51a6709987f0\nAuthor: Rui Chen <rui@chenrui.dev>\nDate:   Tue Sep 28 18:48:26 2021 -0400\n\n    git-lfs 3.0.1\n    \n    Closes #86082.\n    \n    Signed-off-by: Thierry Moisan <thierry.moisan@gmail.com>\n    Signed-off-by: BrewTestBot <1589480+BrewTestBot@users.noreply.github.com>\n\ncommit 43842898fd3ff43273466052722f5ba2789196cb\nAuthor: Michael Cho <20700669+cho-m@users.noreply.github.com>\nDate:   Wed Jul 7 01:55:56 2021 +0000\n\n    git-lfs: update 2.13.3 bottle.\n"})}),"\n",(0,r.jsxs)(n.p,{children:["here is the 2.13.3 version commit hash ",(0,r.jsx)(n.code,{children:"43842898fd3ff43273466052722f5ba2789196cb"})," and it can be put info ",(0,r.jsx)(n.strong,{children:"raw"})," GitHub url:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"https://raw.githubusercontent.com/Homebrew/homebrew-core/<COMMIT ID>/Formula/git-lfs.rb\n"})}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.p,{children:"In different guides across the internet you may see the following command:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"admin@macos ~ % brew install <url>\n"})}),(0,r.jsxs)(n.p,{children:["It's also ",(0,r.jsx)(n.a,{href:"https://brew.sh/2020/05/29/homebrew-2.3.0/#:~:text=brew%20install%20from%20a%20URL,beginning%20installation%20or%20locking%20dependencies.",children:(0,r.jsx)(n.strong,{children:"deprecated"})})," and ",(0,r.jsx)(n.strong,{children:"not working"})," anymore"]})]}),"\n",(0,r.jsx)(n.p,{children:'Now all you need is to put this file into your own "tap" (repository) on a GitHub and install it using homebrew:'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"admin@macos ~ % brew unlink git-lfs\nadmin@macos ~ % brew install <user>/<repo>/git-lfs\n"})}),"\n",(0,r.jsx)(n.h2,{id:"install-using-local-tap-and-brew-extract",children:"Install using local tap and brew extract"}),"\n",(0,r.jsxs)(n.p,{children:["Another way is to create a local tap and then ",(0,r.jsx)(n.code,{children:"extract"})," the needed version into it:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"admin@macos ~ % brew tap-new $USER/local-git-lfs\nInitialized empty Git repository in /usr/local/Homebrew/Library/Taps/admin/homebrew-local-git-lfs/.git/\n"})}),"\n",(0,r.jsx)(n.p,{children:"this one creates a new local tap inside your local Homebrew repo."}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.code,{children:"brew --repository"})," command to find Homebrew's root location"]})}),"\n",(0,r.jsxs)(n.p,{children:["After that you can ",(0,r.jsx)(n.code,{children:"extract"})," the correct version into this new tap"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"admin@macos ~ % brew extract --version 2.13.3 git-lfs $USER/local-git-lfs\n"})}),"\n",(0,r.jsx)(n.p,{children:"and the last step is to install this version as usual:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"admin@macos ~ % brew unlink git-lfs # in case of another version installed\nadmin@macos ~ % brew install git-lfs@2.13.3\n"})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var o=t(6540);const r={},a=o.createContext(r);function s(e){const n=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);