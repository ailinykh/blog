"use strict";(self.webpackChunkailinykh_com=self.webpackChunkailinykh_com||[]).push([[9756],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return h}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(n),h=r,b=u["".concat(s,".").concat(h)]||u[h]||m[h]||o;return n?a.createElement(b,l(l({ref:t},c),{},{components:n})):a.createElement(b,l({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=u;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},6016:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return o},metadata:function(){return i},toc:function(){return p}});var a=n(3117),r=(n(7294),n(3905));const o={slug:"homebrew-formula-downgrade",title:"Homebrew package version downgrade",author:"Anton Ilinykh",author_image_url:"https://avatars.githubusercontent.com/u/939390?s=400&v=4",tags:["homebrew","package","formula","rollback","guide"]},l=void 0,i={permalink:"/homebrew-formula-downgrade",editUrl:"https://github.com/ailinykh/blog/edit/master/blog/2021-10-23-homebrew-formula-downgrade.md",source:"@site/blog/2021-10-23-homebrew-formula-downgrade.md",title:"Homebrew package version downgrade",description:"Nowadays rollback to any particular version of the Homebrew package might be tricky since the commands brew versions  and brew switch   are deprecated and no more available.",date:"2021-10-23T00:00:00.000Z",formattedDate:"October 23, 2021",tags:[{label:"homebrew",permalink:"/tags/homebrew"},{label:"package",permalink:"/tags/package"},{label:"formula",permalink:"/tags/formula"},{label:"rollback",permalink:"/tags/rollback"},{label:"guide",permalink:"/tags/guide"}],readingTime:2.45,hasTruncateMarker:!0,authors:[{name:"Anton Ilinykh",imageURL:"https://avatars.githubusercontent.com/u/939390?s=400&v=4"}],frontMatter:{slug:"homebrew-formula-downgrade",title:"Homebrew package version downgrade",author:"Anton Ilinykh",author_image_url:"https://avatars.githubusercontent.com/u/939390?s=400&v=4",tags:["homebrew","package","formula","rollback","guide"]},prevItem:{title:"FFMPEG cheatsheet",permalink:"/ffmpeg-cheatsheet"},nextItem:{title:"Testing netwok requests with URLProtocol stubs",permalink:"/network-testing-with-url-protocol-stubbing"}},s={authorsImageUrls:[void 0]},p=[{value:"Install using remote tap",id:"install-using-remote-tap",level:2},{value:"Install using local tap and brew extract",id:"install-using-local-tap-and-brew-extract",level:2}],c={toc:p};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Nowadays rollback to any particular version of the Homebrew package might be tricky since the commands ",(0,r.kt)("inlineCode",{parentName:"p"},"brew versions <package>")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"brew switch <package> <version>")," are deprecated and no more available."),(0,r.kt)("p",null,"First, you should check if any other versions are available for your package:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'admin@macos ~ % brew search python\n==> Formulae\napp-engine-python          python-launcher            python@3.8\nboost-python               python-markdown            python@3.9 \u2714\nboost-python3              python-tabulate            reorder-python-imports\nbpython                    python-tk@3.10             wxpython\ngst-python                 python-tk@3.9              pythran\nipython                    python-yq                  jython\nmicropython                python@3.10                cython\nptpython                   python@3.7\n==> Casks\nawips-python                             mysql-connector-python\n\nIf you meant "python" specifically:\nIt was migrated from homebrew/cask to homebrew/core.\n')),(0,r.kt)("p",null,"if so, the necessary version could be installed right from the repo:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"admin@macos ~ % brew install python@3.10\nadmin@macos ~ % brew link python@3.10\nadmin@macos ~ % python3 --version                                                               \nPython 3.10.0\n\nadmin@macos ~ % \n")),(0,r.kt)("p",null,"if not, there are two more ways to achieve that."),(0,r.kt)("h2",{id:"install-using-remote-tap"},"Install using remote tap"),(0,r.kt)("p",null,"You should find the correct Formula file at github.com"),(0,r.kt)("p",null,"Let's say you are trying to downgrade the ",(0,r.kt)("inlineCode",{parentName:"p"},"git-lfs")," package. In this case, you should follow these steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Go to ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/git-lfs.rb"},"https://github.com/Homebrew/homebrew-core/blob/HEAD/Formula/git-lfs.rb")),(0,r.kt)("li",{parentName:"ol"},"In the top right corner find the ",(0,r.kt)("strong",{parentName:"li"},"History")," button"),(0,r.kt)("li",{parentName:"ol"},"Find commit with the version you need"),(0,r.kt)("li",{parentName:"ol"},"Choose ",(0,r.kt)("strong",{parentName:"li"},"View file")," from the menu"),(0,r.kt)("li",{parentName:"ol"},"Click ",(0,r.kt)("strong",{parentName:"li"},"Raw")," button"),(0,r.kt)("li",{parentName:"ol"},"That is it! You've got the Url: ",(0,r.kt)("a",{parentName:"li",href:"https://raw.githubusercontent.com/Homebrew/homebrew-core/43842898fd3ff43273466052722f5ba2789196cb/Formula/git-lfs.rb"},"https://raw.githubusercontent.com/Homebrew/homebrew-core/43842898fd3ff43273466052722f5ba2789196cb/Formula/git-lfs.rb"))),(0,r.kt)("p",null,"or just by using ",(0,r.kt)("inlineCode",{parentName:"p"},"git log git-lfs")," command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:"{19}","{19}":!0},"admin@macos ~ % brew log git-lfs\ncommit be2109eae9e1043ddb78e593a8a05d568917ca95\nAuthor: BrewTestBot <1589480+BrewTestBot@users.noreply.github.com>\nDate:   Wed Sep 29 02:14:15 2021 +0000\n\n    git-lfs: update 3.0.1 bottle.\n\ncommit 1c4607366f2c5d85c2efa803556f51a6709987f0\nAuthor: Rui Chen <rui@chenrui.dev>\nDate:   Tue Sep 28 18:48:26 2021 -0400\n\n    git-lfs 3.0.1\n    \n    Closes #86082.\n    \n    Signed-off-by: Thierry Moisan <thierry.moisan@gmail.com>\n    Signed-off-by: BrewTestBot <1589480+BrewTestBot@users.noreply.github.com>\n\ncommit 43842898fd3ff43273466052722f5ba2789196cb\nAuthor: Michael Cho <20700669+cho-m@users.noreply.github.com>\nDate:   Wed Jul 7 01:55:56 2021 +0000\n\n    git-lfs: update 2.13.3 bottle.\n")),(0,r.kt)("p",null,"here is the 2.13.3 version commit hash ",(0,r.kt)("inlineCode",{parentName:"p"},"43842898fd3ff43273466052722f5ba2789196cb")," and it can be put info ",(0,r.kt)("strong",{parentName:"p"},"raw")," GitHub url:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"https://raw.githubusercontent.com/Homebrew/homebrew-core/<COMMIT ID>/Formula/git-lfs.rb\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"In different guides across the internet you may see the following command:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"admin@macos ~ % brew install <url>\n")),(0,r.kt)("p",{parentName:"admonition"},"It's also ",(0,r.kt)("a",{parentName:"p",href:"https://brew.sh/2020/05/29/homebrew-2.3.0/#:~:text=brew%20install%20from%20a%20URL,beginning%20installation%20or%20locking%20dependencies."},(0,r.kt)("strong",{parentName:"a"},"deprecated"))," and ",(0,r.kt)("strong",{parentName:"p"},"not working")," anymore")),(0,r.kt)("p",null,'Now all you need is to put this file into your own "tap" (repository) on a GitHub and install it using homebrew:'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"admin@macos ~ % brew unlink git-lfs\nadmin@macos ~ % brew install <user>/<repo>/git-lfs\n")),(0,r.kt)("h2",{id:"install-using-local-tap-and-brew-extract"},"Install using local tap and brew extract"),(0,r.kt)("p",null,"Another way is to create a local tap and then ",(0,r.kt)("inlineCode",{parentName:"p"},"extract")," the needed version into it:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"admin@macos ~ % brew tap-new $USER/local-git-lfs\nInitialized empty Git repository in /usr/local/Homebrew/Library/Taps/admin/homebrew-local-git-lfs/.git/\n")),(0,r.kt)("p",null,"this one creates a new local tap inside your local Homebrew repo."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Use ",(0,r.kt)("inlineCode",{parentName:"p"},"brew --repository")," command to find Homebrew's root location")),(0,r.kt)("p",null,"After that you can ",(0,r.kt)("inlineCode",{parentName:"p"},"extract")," the correct version into this new tap"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"admin@macos ~ % brew extract --version 2.13.3 git-lfs $USER/local-git-lfs\n")),(0,r.kt)("p",null,"and the last step is to install this version as usual:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"admin@macos ~ % brew unlink git-lfs # in case of another version installed\nadmin@macos ~ % brew install git-lfs@2.13.3\n")))}m.isMDXComponent=!0}}]);